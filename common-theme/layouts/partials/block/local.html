{{ $blockData := .Page.Scratch.Get "blockData" }}
{{ $block := .Page.Site.GetPage $blockData.api }}

{{ if eq $block.Content "" }}
  {{ errorf "Page %s block %s had no content" .Page.Path $blockData.api }}
{{ end }}


<section
  class="c-block c-block--{{ $blockData.type }}"
  aria-labelledby="{{ $blockData.name |urlize }}">
  <div class="c-block__body" tabindex="0">
    <header class="c-block__header">
      <h2
        class="c-block__title e-heading__2"
        id="{{ $blockData.name |urlize }}">
        {{ $block.Title }}
      </h2>
      {{ partial "time.html" . }}
    </header>
    {{ with $block.Params.Objectives }}
      <details>
        <summary><h3 class="e-heading__5">Learning Objectives</h3></summary>
        {{ partial "objectives/block.html" . }}
      </details>
    {{ end }}
    {{ with $blockData.hasBlocks }}
      {{ range . }}
        {{ $innerArray := index . 0 }}
        {{ $blockDict := dict "block" $innerArray "Page" $.Page "Site" $.Site }}
        {{ partial "block/nested.html"  $blockDict }}
      {{ end }}
    {{ end }}
    <div class="c-block__content c-copy">{{ $block.Content }}</div>
  </div>
</section>
